{
  "version": "7",
  "dialect": "sqlite",
  "id": "1ccaa992-af36-4234-a52e-2c90dcbed159",
  "prevIds": ["00000000-0000-0000-0000-000000000000"],
  "ddl": [
    {
      "name": "task_definitions",
      "entityType": "tables"
    },
    {
      "name": "task_executions",
      "entityType": "tables"
    },
    {
      "name": "task_metrics",
      "entityType": "tables"
    },
    {
      "type": "integer",
      "notNull": false,
      "autoincrement": true,
      "default": null,
      "generated": null,
      "name": "id",
      "entityType": "columns",
      "table": "task_definitions"
    },
    {
      "type": "text",
      "notNull": true,
      "autoincrement": false,
      "default": null,
      "generated": null,
      "name": "name",
      "entityType": "columns",
      "table": "task_definitions"
    },
    {
      "type": "text",
      "notNull": false,
      "autoincrement": false,
      "default": null,
      "generated": null,
      "name": "description",
      "entityType": "columns",
      "table": "task_definitions"
    },
    {
      "type": "text",
      "notNull": true,
      "autoincrement": false,
      "default": null,
      "generated": null,
      "name": "cron",
      "entityType": "columns",
      "table": "task_definitions"
    },
    {
      "type": "text",
      "notNull": false,
      "autoincrement": false,
      "default": null,
      "generated": null,
      "name": "icon",
      "entityType": "columns",
      "table": "task_definitions"
    },
    {
      "type": "text",
      "notNull": true,
      "autoincrement": false,
      "default": null,
      "generated": null,
      "name": "command",
      "entityType": "columns",
      "table": "task_definitions"
    },
    {
      "type": "text",
      "notNull": false,
      "autoincrement": false,
      "default": null,
      "generated": null,
      "name": "envs",
      "entityType": "columns",
      "table": "task_definitions"
    },
    {
      "type": "integer",
      "notNull": true,
      "autoincrement": false,
      "default": "true",
      "generated": null,
      "name": "enabled",
      "entityType": "columns",
      "table": "task_definitions"
    },
    {
      "type": "integer",
      "notNull": true,
      "autoincrement": false,
      "default": null,
      "generated": null,
      "name": "created_at",
      "entityType": "columns",
      "table": "task_definitions"
    },
    {
      "type": "integer",
      "notNull": true,
      "autoincrement": false,
      "default": null,
      "generated": null,
      "name": "updated_at",
      "entityType": "columns",
      "table": "task_definitions"
    },
    {
      "type": "text",
      "notNull": false,
      "autoincrement": false,
      "default": null,
      "generated": null,
      "name": "id",
      "entityType": "columns",
      "table": "task_executions"
    },
    {
      "type": "integer",
      "notNull": true,
      "autoincrement": false,
      "default": null,
      "generated": null,
      "name": "task_id",
      "entityType": "columns",
      "table": "task_executions"
    },
    {
      "type": "text",
      "notNull": true,
      "autoincrement": false,
      "default": null,
      "generated": null,
      "name": "status",
      "entityType": "columns",
      "table": "task_executions"
    },
    {
      "type": "integer",
      "notNull": false,
      "autoincrement": false,
      "default": null,
      "generated": null,
      "name": "exit_code",
      "entityType": "columns",
      "table": "task_executions"
    },
    {
      "type": "text",
      "notNull": false,
      "autoincrement": false,
      "default": null,
      "generated": null,
      "name": "stdout",
      "entityType": "columns",
      "table": "task_executions"
    },
    {
      "type": "text",
      "notNull": false,
      "autoincrement": false,
      "default": null,
      "generated": null,
      "name": "stderr",
      "entityType": "columns",
      "table": "task_executions"
    },
    {
      "type": "integer",
      "notNull": false,
      "autoincrement": false,
      "default": null,
      "generated": null,
      "name": "started_at",
      "entityType": "columns",
      "table": "task_executions"
    },
    {
      "type": "integer",
      "notNull": false,
      "autoincrement": false,
      "default": null,
      "generated": null,
      "name": "finished_at",
      "entityType": "columns",
      "table": "task_executions"
    },
    {
      "type": "integer",
      "notNull": false,
      "autoincrement": false,
      "default": null,
      "generated": null,
      "name": "duration_ms",
      "entityType": "columns",
      "table": "task_executions"
    },
    {
      "type": "integer",
      "notNull": true,
      "autoincrement": false,
      "default": null,
      "generated": null,
      "name": "created_at",
      "entityType": "columns",
      "table": "task_executions"
    },
    {
      "type": "integer",
      "notNull": true,
      "autoincrement": false,
      "default": null,
      "generated": null,
      "name": "updated_at",
      "entityType": "columns",
      "table": "task_executions"
    },
    {
      "type": "integer",
      "notNull": false,
      "autoincrement": false,
      "default": null,
      "generated": null,
      "name": "task_id",
      "entityType": "columns",
      "table": "task_metrics"
    },
    {
      "type": "integer",
      "notNull": true,
      "autoincrement": false,
      "default": "0",
      "generated": null,
      "name": "total_runs",
      "entityType": "columns",
      "table": "task_metrics"
    },
    {
      "type": "integer",
      "notNull": true,
      "autoincrement": false,
      "default": "0",
      "generated": null,
      "name": "failed_runs",
      "entityType": "columns",
      "table": "task_metrics"
    },
    {
      "type": "integer",
      "notNull": false,
      "autoincrement": false,
      "default": null,
      "generated": null,
      "name": "last_run_at",
      "entityType": "columns",
      "table": "task_metrics"
    },
    {
      "type": "integer",
      "notNull": false,
      "autoincrement": false,
      "default": null,
      "generated": null,
      "name": "next_run_at",
      "entityType": "columns",
      "table": "task_metrics"
    },
    {
      "columns": ["task_id"],
      "tableTo": "task_definitions",
      "columnsTo": ["id"],
      "onUpdate": "NO ACTION",
      "onDelete": "CASCADE",
      "nameExplicit": false,
      "name": "fk_task_executions_task_id_task_definitions_id_fk",
      "entityType": "fks",
      "table": "task_executions"
    },
    {
      "columns": ["task_id"],
      "tableTo": "task_definitions",
      "columnsTo": ["id"],
      "onUpdate": "NO ACTION",
      "onDelete": "CASCADE",
      "nameExplicit": false,
      "name": "fk_task_metrics_task_id_task_definitions_id_fk",
      "entityType": "fks",
      "table": "task_metrics"
    },
    {
      "columns": ["id"],
      "nameExplicit": false,
      "name": "task_definitions_pk",
      "table": "task_definitions",
      "entityType": "pks"
    },
    {
      "columns": ["id"],
      "nameExplicit": false,
      "name": "task_executions_pk",
      "table": "task_executions",
      "entityType": "pks"
    },
    {
      "columns": ["task_id"],
      "nameExplicit": false,
      "name": "task_metrics_pk",
      "table": "task_metrics",
      "entityType": "pks"
    },
    {
      "columns": [
        {
          "value": "task_id",
          "isExpression": false
        },
        {
          "value": "status",
          "isExpression": false
        }
      ],
      "isUnique": false,
      "where": null,
      "origin": "manual",
      "name": "idx_task_exec_by_task_and_status",
      "entityType": "indexes",
      "table": "task_executions"
    },
    {
      "columns": [
        {
          "value": "status",
          "isExpression": false
        },
        {
          "value": "created_at",
          "isExpression": false
        }
      ],
      "isUnique": false,
      "where": null,
      "origin": "manual",
      "name": "idx_task_exec_by_status_created_at",
      "entityType": "indexes",
      "table": "task_executions"
    },
    {
      "columns": [
        {
          "value": "status",
          "isExpression": false
        },
        {
          "value": "started_at",
          "isExpression": false
        }
      ],
      "isUnique": false,
      "where": null,
      "origin": "manual",
      "name": "idx_task_exec_by_status_started_at",
      "entityType": "indexes",
      "table": "task_executions"
    }
  ],
  "renames": []
}
